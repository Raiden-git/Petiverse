<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vet Registration</title>
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDHdLOieN0OIcTyyY6CmJv6gPNx-OX3MwA&callback=initMap" async defer></script>
    <style>
        #map {
            height: 400px;
            width: 100%;
        }
    </style>
</head>
<body>

<h2>Vet Registration</h2>
<form action="register_vet.php" method="POST">
    <label for="name">Name:</label>
    <input type="text" id="name" name="name" required><br><br>

    <label for="qualification">Qualification:</label>
    <input type="text" id="qualification" name="qualification" required><br><br>

    <label for="experience">Experience (years):</label>
    <input type="number" id="experience" name="experience" required><br><br>

    <label for="clinic_name">Clinic Name:</label>
    <input type="text" id="clinic_name" name="clinic_name" required><br><br>

    <label for="clinic_address">Clinic Address:</label>
    <input type="text" id="clinic_address" name="clinic_address" required><br><br>

    <label for="consultation_fee">Consultation Fee:</label>
    <input type="text" id="consultation_fee" name="consultation_fee" required><br><br>

    <label for="contact_details">Contact Details:</label>
    <input type="text" id="contact_details" name="contact_details" required><br><br>

    <label for="services">Services:</label>
    <select id="services" name="services">
        <option value="online">Online</option>
        <option value="physical">Physical</option>
        <option value="both">Both</option>
    </select><br><br>

    <p>Choose the place of your Vet Hospital Location</p>

    <div id="map"></div><br><br>

    <input type="hidden" id="latitude" name="latitude">
    <input type="hidden" id="longitude" name="longitude">

    <button type="submit">Register</button>
</form>

<script>
    function initMap() {
        var defaultCenter = { lat: -34.397, lng: 150.644 }; // Fallback if geolocation fails
        var mapOptions = {
            zoom: 12,
            center: defaultCenter
        };

        var map = new google.maps.Map(document.getElementById('map'), mapOptions);

        var marker = new google.maps.Marker({
            position: defaultCenter,
            map: map,
            draggable: true
        });

        // Try to get user's current location
        if (navigator.geolocation) {
            navigator.geolocation.getCurrentPosition(function(position) {
                var userLocation = {
                    lat: position.coords.latitude,
                    lng: position.coords.longitude
                };

                // Center map on user's current location
                map.setCenter(userLocation);
                marker.setPosition(userLocation);

                // Update the hidden latitude and longitude fields
                document.getElementById('latitude').value = userLocation.lat;
                document.getElementById('longitude').value = userLocation.lng;
            }, function() {
                console.log("Geolocation service failed. Using default location.");
            });
        } else {
            console.log("Your browser doesn't support geolocation.");
        }

        // Update the hidden latitude and longitude fields when the marker is moved
        google.maps.event.addListener(marker, 'position_changed', function() {
            var lat = marker.getPosition().lat();
            var lng = marker.getPosition().lng();

            document.getElementById('latitude').value = lat;
            document.getElementById('longitude').value = lng;
        });
    }
</script>

</body>
</html>
